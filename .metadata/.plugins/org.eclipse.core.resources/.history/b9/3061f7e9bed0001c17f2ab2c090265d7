<%@ page contentType="text/html; charset=UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>

<style>
.img-small {
	margin-bottom: 7px;
}
</style>
<div class="container" style="margin-top: 35px">
	<h3 class="text-center">CHI TIẾT SẢN PHẨM</h3>
	<hr style="width: 10%; height: 2px" class="color-main">
	<div class="container pt-4">
		<div class="row">
			<div class="col-6">
				<div class="row">
					<div class="col-2 p-0">
						<c:forEach items="${item.images}" var="img">
							<img class="img-thumbnail img-small" src="upload/${img}" alt=""
								onclick="fChangeImage(this)">
						</c:forEach>
					</div>
					<div class="col-10">
						<img class="img-thumbnail" src="upload/${item.thump}" alt=""
							id="imgThump">
					</div>
				</div>
			</div>
			<div class="col-6">
				<p class="font-weight-bold font-weight-bolder mb-0">${item.name}</p>
				<small>Mã sản phẩm: #${item.id }</small></br>
				<p class="text-danger font-weight-bold" style="font-size: 23px;">
					Giá:
					<fmt:formatNumber value="${item.price}" type="currency" />
				</p>
				<hr>
				<div class="row">
					<div class="col">
						<div class="form-inline">
							<label>Kích thước: &ensp;</label> <select class="form-control"
								id="size">
								<option value="-1" disabled selected>Chọn kích thước</option>
								<c:forEach items="${item.infos}" var="info">
									<c:if test="${info.quantity > 0}">
										<option value="${info.size}" data-quantity="${info.quantity}">${info.size}</option>
									</c:if>
								</c:forEach>

							</select>
						</div>
					</div>
				</div>
				<p style="margin-bottom: 10px; font-size: 13px;" class="mt-2">Còn
					<span id="quantity" class="font-weight-bold">.</span> sản phẩm</p>

				<div class="row">
					<div class="col">
						<div class="form-inline">
							<label>Số lượng: &ensp;</label> <input type="number"
								class="form-control" value="1" style="width: 60%">
						</div>
					</div>
					<div class="col">
						<button class="form-control btn-primary btn-sm font-weight-bold">
							<i class="fas fa-cart-arrow-down"></i> THÊM VÀO GIỎ HÀNG
						</button>
					</div>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col">
				<div class="bg-light mt-5 p-3">Mô tả sản phẩm</div>
			</div>
		</div>
	</div>
</div>

<script>
	$("#size").on("change", function(){
		var quantity = $("#size").find(":selected").attr("data-quantity");
		console.log(quantity);
		$("#quantity").html(quantity);
	});

	function fChangeImage(t) {
		$('#imgThump').fadeOut().queue(function() {
			var img = $(this);
			img.attr('src', $(t).attr("src"));
			img.fadeIn();
			img.dequeue();
		});
	}
</script>